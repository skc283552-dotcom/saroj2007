<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Accounting System</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
<style>
body { font-family: Arial, sans-serif; margin: 0; padding: 0; background: #f4f4f9; }
header { background: #2c3e50; color: #fff; padding: 15px; text-align: center; font-size: 22px; }
.dashboard { display: flex; justify-content: center; gap: 20px; margin: 30px; flex-wrap: wrap; }
.icon { width: 150px; height: 150px; background: #3498db; color: white; display: flex; align-items: center; justify-content: center; font-size: 18px; font-weight: bold; cursor: pointer; border-radius: 15px; transition: 0.3s; }
.icon:hover { background: #2980b9; }
.page { display: none; padding: 20px; }
table { border-collapse: collapse; width: 100%; margin-top: 20px; }
table, th, td { border: 1px solid #ddd; }
th, td { padding: 10px; text-align: center; }
button { padding: 6px 12px; margin: 5px; cursor: pointer; border: none; border-radius: 6px; }
.back-btn { background: #e74c3c; color: white; }
.save-btn { background: #27ae60; color: white; }
.edit-btn { background: #f39c12; color: white; }
.delete-btn { background: #c0392b; color: white; }
.download-btn { background: #8e44ad; color: white; }
.balance-div { margin-top: 15px; font-weight: bold; }
</style>
</head>
<body>
<header>📊 Accounting System</header>

<!-- Dashboard -->
<div class="dashboard" id="dashboard">
  <div class="icon" onclick="openPage('journal')">📘 Journal</div>
  <div class="icon" onclick="openPage('ledger')">📗 Ledger</div>
  <div class="icon" onclick="openPage('transactions')">📒 Transactions</div>
  <div class="icon" onclick="downloadPDF()">📑 Download PDF</div>
</div>

<!-- Journal Page -->
<div class="page" id="journal">
  <h2>Journal Entry</h2>
  <form id="journalForm">
    <label>Particular:</label><input type="text" id="particular" required><br><br>
    <label>Debit (Dr):</label><input type="number" id="debit" value="0"><br><br>
    <label>Credit (Cr):</label><input type="number" id="credit" value="0"><br><br>
    <label>Status:</label>
    <select id="status">
      <option value="Paid">Paid</option>
      <option value="Unpaid">Unpaid</option>
    </select><br><br>
    <label>Payment Type:</label>
    <select id="paymentType">
      <option>Cash</option>
      <option>Bank</option>
      <option>eSewa</option>
      <option>Fonepay</option>
    </select><br><br>
    <button type="submit" class="save-btn">Save Entry</button>
  </form>
  <button class="back-btn" onclick="goBack()">⬅ Back</button>
</div>

<!-- Ledger Page -->
<div class="page" id="ledger">
  <h2>Ledger</h2>
  <label>Search by Name:</label> <input type="text" id="searchName">
  <label>Search by Date:</label> <input type="date" id="searchDate">
  <button onclick="filterLedger()">Search</button>
  <table id="ledgerTable">
    <thead>
      <tr><th>Date</th><th>Particular</th><th>Debit</th><th>Credit</th><th>Status</th><th>Payment</th><th>Balance</th></tr>
    </thead>
    <tbody></tbody>
  </table>
  <h3>Total Balance: <span id="ledgerTotal">0</span></h3>
  <div id="ledgerPaymentBalances" class="balance-div"></div>
  <button class="back-btn" onclick="goBack()">⬅ Back</button>
</div>

<!-- Transactions Page -->
<div class="page" id="transactions">
  <h2>All Transactions</h2>
  <table id="transactionTable">
    <thead>
      <tr><th>Date</th><th>Particular</th><th>Debit</th><th>Credit</th><th>Status</th><th>Payment</th><th>Actions</th></tr>
    </thead>
    <tbody></tbody>
  </table>
  <h3>Total Income: <span id="totalIncome">0</span> | Total Expense: <span id="totalExpense">0</span></h3>
  <div id="paymentBalances" class="balance-div"></div>
  <button class="back-btn" onclick="goBack()">⬅ Back</button>
</div>

<script>
let entries = JSON.parse(localStorage.getItem("entries")) || [];

function openPage(pageId) {
  document.querySelectorAll(".page").forEach(p => p.style.display = "none");
  document.getElementById("dashboard").style.display = "none";
  document.getElementById(pageId).style.display = "block";
  if (pageId === "ledger") loadLedger();
  if (pageId === "transactions") loadTransactions();
}

function goBack() {
  document.querySelectorAll(".page").forEach(p => p.style.display = "none");
  document.getElementById("dashboard").style.display = "flex";
}

document.getElementById("journalForm").addEventListener("submit", function(e) {
  e.preventDefault();
  let date = new Date().toISOString().split("T")[0];
  let particular = document.getElementById("particular").value;
  let debit = parseFloat(document.getElementById("debit").value) || 0;
  let credit = parseFloat(document.getElementById("credit").value) || 0;
  let status = document.getElementById("status").value;
  let paymentType = document.getElementById("paymentType").value;

  entries.push({ date, particular, debit, credit, status, paymentType });
  localStorage.setItem("entries", JSON.stringify(entries));
  alert("Entry Saved!");
  this.reset();
});

function calculateBalances() {
  let balances = { Cash:0, Bank:0, eSewa:0, Fonepay:0 };
  entries.forEach(e => {
    let net = (e.credit || 0) - (e.debit || 0);
    balances[e.paymentType] = (balances[e.paymentType] || 0) + net;
  });
  return balances;
}

function loadTransactions() {
  let tbody = document.querySelector("#transactionTable tbody");
  tbody.innerHTML = "";
  let totalIncome = 0, totalExpense = 0;
  entries.forEach((e, i) => {
    totalIncome += e.credit;
    totalExpense += e.debit;
    let row = `<tr>
      <td>${e.date}</td><td>${e.particular}</td><td>${e.debit}</td>
      <td>${e.credit}</td><td>${e.status}</td><td>${e.paymentType}</td>
      <td>
        <button class="edit-btn" onclick="editEntry(${i})">Edit</button>
        <button class="delete-btn" onclick="deleteEntry(${i})">Delete</button>
      </td>
    </tr>`;
    tbody.innerHTML += row;
  });
  document.getElementById("totalIncome").innerText = totalIncome;
  document.getElementById("totalExpense").innerText = totalExpense;

  let balances = calculateBalances();
  let balanceDiv = document.getElementById("paymentBalances");
  balanceDiv.innerHTML = `Cash: ${balances.Cash} | Bank: ${balances.Bank} | eSewa: ${balances.eSewa} | Fonepay: ${balances.Fonepay}`;
}

function loadLedger() {
  let tbody = document.querySelector("#ledgerTable tbody");
  tbody.innerHTML = "";
  let total = 0;
  entries.forEach(e => {
    total += e.credit - e.debit;
    tbody.innerHTML += `<tr>
      <td>${e.date}</td><td>${e.particular}</td>
      <td>${e.debit}</td><td>${e.credit}</td>
      <td>${e.status}</td><td>${e.paymentType}</td>
      <td>${total}</td>
    </tr>`;
  });
  document.getElementById("ledgerTotal").innerText = total;

  let balances = calculateBalances();
  let ledgerBalanceDiv = document.getElementById("ledgerPaymentBalances");
  ledgerBalanceDiv.innerHTML = `Cash: ${balances.Cash} | Bank: ${balances.Bank} | eSewa: ${balances.eSewa} | Fonepay: ${balances.Fonepay}`;
}

function filterLedger() {
  let name = document.getElementById("searchName").value.toLowerCase();
  let date = document.getElementById("searchDate").value;
  let tbody = document.querySelector("#ledgerTable tbody");
  tbody.innerHTML = "";
  let total = 0;
  entries.filter(e => (!name || e.particular.toLowerCase().includes(name)) &&
                      (!date || e.date === date))
         .forEach(e => {
    total += e.credit - e.debit;
    tbody.innerHTML += `<tr>
      <td>${e.date}</td><td>${e.particular}</td>
      <td>${e.debit}</td><td>${e.credit}</td>
      <td>${e.status}</td><td>${e.paymentType}</td>
      <td>${total}</td>
    </tr>`;
  });
  document.getElementById("ledgerTotal").innerText = total;

  let balances = calculateBalances();
  document.getElementById("ledgerPaymentBalances").innerHTML =
    `Cash: ${balances.Cash} | Bank: ${balances.Bank} | eSewa: ${balances.eSewa} | Fonepay: ${balances.Fonepay}`;
}

function deleteEntry(index) {
  if (confirm("Delete this entry?")) {
    entries.splice(index, 1);
    localStorage.setItem("entries", JSON.stringify(entries));
    loadTransactions();
    loadLedger();
  }
}

function editEntry(index) {
  let e = entries[index];
  document.getElementById("particular").value = e.particular;
  document.getElementById("debit").value = e.debit;
  document.getElementById("credit").value = e.credit;
  document.getElementById("status").value = e.status;
  document.getElementById("paymentType").value = e.paymentType;
  deleteEntry(index);
  openPage("journal");
}

function downloadPDF() {
  const { jsPDF } = window.jspdf;
  let doc = new jsPDF();
  doc.text("Accounting Transactions Report", 14, 15);
  doc.autoTable({
    startY: 20,
    head: [["Date", "Particular", "Debit", "Credit", "Status", "Payment", "Balance"]],
    body: entries.map((e, i) => [
      e.date, e.particular, e.debit, e.credit, e.status, e.paymentType,
      entries.slice(0, i+1).reduce((t, x) => t + (x.credit - x.debit), 0)
    ])
  });

  let y = doc.lastAutoTable.finalY + 10;
  let balances = calculateBalances();
  doc.text(`Balances: Cash ${balances.Cash} | Bank ${balances.Bank} | eSewa ${balances.eSewa} | Fonepay ${balances.Fonepay}`, 14, y);

  doc.save("transactions.pdf");
}
</script>
</body>
</html>

On Sat, Aug 23, 2025, 12:38 AM Saroj KC <skc283552@gmail.com> wrote:
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Advanced Accounting System</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<style>
body { font-family: Arial, sans-serif; margin:0; background:#f4f4f9; }
header { background:#2c3e50; color:white; padding:15px; text-align:center; font-size:22px; position:relative; }
#clock { position:absolute; right:20px; top:15px; font-size:16px; color:#ecf0f1; }
.container { padding:20px; }
.hidden { display:none; }
button { padding:8px 12px; margin:5px; border:none; border-radius:6px; cursor:pointer; }
.back-btn { background:#555; color:white; margin-bottom:15px; }
.icon-grid { display:grid; grid-template-columns: repeat(3, 150px); gap:20px; justify-content:center; margin-top:50px; }
.icon { background:white; border-radius:12px; box-shadow:0 2px 6px rgba(0,0,0,0.2); text-align:center; padding:20px; cursor:pointer; font-weight:bold; transition:0.3s; }
.icon:hover { background:#ecf0f1; transform:translateY(-5px); }
table { width:100%; border-collapse:collapse; margin-top:15px; }
th, td { border:1px solid #ccc; padding:8px; text-align:center; }
th { background:#34495e; color:white; }
.status-pending { color:red; font-weight:bold; }
.status-done { color:green; font-weight:bold; }
.search-box { margin:15px 0; display:flex; gap:10px; flex-wrap:wrap; }
input, select { padding:6px; margin:3px 0; }
tfoot tr th { background:#bdc3c7; }
</style>
</head>
<body>
<header>📊 Advanced Accounting System <span id="clock"></span></header>
<div class="container">

<!-- Dashboard -->
<div id="dashboard">
  <div class="icon-grid">
    <div class="icon" onclick="showPage('newTransaction')">➕<br>New Transaction</div>
    <div class="icon" onclick="showPage('allTransactions')">📑<br>All Transactions</div>
    <div class="icon" onclick="showPage('ledger')">📘<br>Ledger</div>
    <div class="icon" onclick="showPage('searchPage')">🔍<br>Search</div>
    <div class="icon" onclick="showPage('reports')">📊<br>Reports</div>
    <div class="icon" onclick="clearAll()">🗑<br>Clear Data</div>
  </div>
</div>

<!-- New Transaction -->
<div id="newTransaction" class="hidden">
  <button class="back-btn" onclick="goBack()">⬅ Back</button>
  <h2>New Transaction</h2>
  <form id="transactionForm">
    <input type="text" id="name" placeholder="Person/Organization" required><br>
    <input type="number" id="amount" placeholder="Amount (NPR)" required><br>
    <select id="type">
      <option value="Income">Income</option>
      <option value="Expense">Expense</option>
      <option value="Received">Received</option>
      <option value="Given">Given</option>
    </select><br>
    <select id="payment">
      <option value="Cash">Cash</option>
      <option value="Bank">Bank</option>
      <option value="eSewa">eSewa</option>
      <option value="Mobile Banking">Mobile Banking</option>
      <option value="Credit/Debit Card">Credit/Debit Card</option>
      <option value="Investment">Investment</option>
    </select><br>
    <select id="status">
      <option value="Pending">Pending</option>
      <option value="Done">Done</option>
    </select><br><br>
    <button type="submit">Save Transaction</button>
  </form>
</div>

<!-- All Transactions -->
<div id="allTransactions" class="hidden">
  <button class="back-btn" onclick="goBack()">⬅ Back</button>
  <h2>All Transactions</h2>
  <button onclick="downloadPDF(transactions)">⬇ Download PDF</button>
  <table>
    <thead>
      <tr><th>Date (AD)</th><th>Date (BS)</th><th>Name</th><th>Debit</th><th>Credit</th><th>Payment</th><th>Status</th><th>Balance</th><th>Action</th></tr>
    </thead>
    <tbody id="transactionTable"></tbody>
    <tfoot>
      <tr><th colspan="3">Totals</th><th id="totalDebit">0</th><th id="totalCredit">0</th><th colspan="2"></th><th id="totalBalance">0</th><th></th></tr>
    </tfoot>
  </table>
</div>

<!-- Ledger -->
<div id="ledger" class="hidden">
  <button class="back-btn" onclick="goBack()">⬅ Back</button>
  <h2>Ledger / Journal</h2>
  <div class="search-box">
    <input type="text" id="ledgerName" placeholder="Filter by Name">
    <input type="date" id="ledgerDate">
    <button onclick="filterLedger()">Search</button>
    <button onclick="downloadPDF(filteredLedger)">⬇ Download PDF</button>
  </div>
  <table>
    <thead>
      <tr><th>Date (AD)</th><th>Date (BS)</th><th>Name</th><th>Debit</th><th>Credit</th><th>Payment</th><th>Status</th><th>Balance</th></tr>
    </thead>
    <tbody id="ledgerTable"></tbody>
    <tfoot>
      <tr><th colspan="3">Totals</th><th id="ledgerTotalDebit">0</th><th id="ledgerTotalCredit">0</th><th colspan="2"></th><th id="ledgerTotalBalance">0</th></tr>
    </tfoot>
  </table>
</div>

<!-- Search Page -->
<div id="searchPage" class="hidden">
  <button class="back-btn" onclick="goBack()">⬅ Back</button>
  <h2>Search Transaction</h2>
  <div class="search-box">
    <input type="text" id="searchName" placeholder="Enter name...">
    <button onclick="searchPerson()">Search</button>
    <button onclick="downloadPDF(searchResults)">⬇ Download PDF</button>
  </div>
  <table>
    <thead>
      <tr><th>Date (AD)</th><th>Date (BS)</th><th>Name</th><th>Debit</th><th>Credit</th><th>Payment</th><th>Status</th><th>Balance</th></tr>
    </thead>
    <tbody id="searchTable"></tbody>
  </table>
</div>

<!-- Reports Page -->
<div id="reports" class="hidden">
  <button class="back-btn" onclick="goBack()">⬅ Back</button>
  <h2>Reports</h2>
  <button onclick="downloadPDF(transactions)">⬇ Download PDF</button>
  <div id="reportContent"></div>
</div>

</div>

<script>
let transactions = JSON.parse(localStorage.getItem("transactions")) || [];
let searchResults = [];
let filteredLedger = [];

// Clock
function updateClock(){ 
  let d = new Date(); 
  document.getElementById("clock").innerText=d.toLocaleTimeString(); 
}
setInterval(updateClock,1000);

// Show page
function showPage(id){
  document.querySelectorAll('.container > div').forEach(d=>d.classList.add('hidden'));
  document.getElementById(id).classList.remove('hidden');
  renderTransactions();
}

// Go back
function goBack(){ showPage('dashboard'); }

// Save transaction
document.getElementById("transactionForm").addEventListener("submit", e=>{
  e.preventDefault();
  let t = {
    dateAD:new Date().toLocaleDateString('en-GB'),
    dateBS:ADtoBS(new Date()),
    name:document.getElementById("name").value,
    amount:parseFloat(document.getElementById("amount").value),
    type:document.getElementById("type").value,
    payment:document.getElementById("payment").value,
    status:document.getElementById("status").value
  };
  transactions.push(t);
  localStorage.setItem("transactions",JSON.stringify(transactions));
  e.target.reset();
  alert("Transaction saved!");
  renderTransactions();
});

// Convert AD to approximate BS
function ADtoBS(date){
  let adYear=date.getFullYear();
  let adMonth=date.getMonth()+1;
  let adDay=date.getDate();
  let bsYear=adYear+57; // approximate
  let bsMonth=adMonth+8;
  if(bsMonth>12){ bsMonth-=12; bsYear+=1; }
  let bsDay=adDay+15;
  if(bsDay>30){ bsDay-=30; bsMonth+=1; if(bsMonth>12){ bsMonth-=12; bsYear+=1; } }
  return bsYear+"-"+bsMonth.toString().padStart(2,'0')+"-"+bsDay.toString().padStart(2,'0');
}

// Render All Transactions
function renderTransactions(){
  let html="", balance=0, totalDebit=0, totalCredit=0;
  transactions.forEach((t,i)=>{
    let debit=(t.type==="Expense"||t.type==="Given")?t.amount:0;
    let credit=(t.type==="Income"||t.type==="Received")?t.amount:0;
    totalDebit+=debit; totalCredit+=credit;
    balance+=credit-debit;
    html+=`<tr>
      <td>${t.dateAD}</td>
      <td>${t.dateBS}</td>
      <td>${t.name}</td>
      <td>${debit}</td>
      <td>${credit}</td>
      <td>${t.payment}</td>
      <td class="${t.status==='Pending'?'status-pending':'status-done'}">${t.status}</td>
      <td>${balance}</td>
      <td><button onclick="markDone(${i})">Done</button></td>
    </tr>`;
  });
  document.getElementById("transactionTable").innerHTML=html;
  document.getElementById("totalDebit").innerText=totalDebit;
  document.getElementById("totalCredit").innerText=totalCredit;
  document.getElementById("totalBalance").innerText=balance;
}

// Mark done
function markDone(i){
  transactions[i].status="Done";
  localStorage.setItem("transactions",JSON.stringify(transactions));
  renderTransactions();
}

// Filter Ledger
function filterLedger(){
  let nameFilter=document.getElementById("ledgerName").value.toLowerCase();
  let dateFilter=document.getElementById("ledgerDate").value;
  filteredLedger=transactions.filter(t=>{
    let matchName=t.name.toLowerCase().includes(nameFilter);
    let matchDate=dateFilter ? new Date(t.dateAD).toISOString().slice(0,10)===dateFilter : true;
    return matchName && matchDate;
  });
  renderLedger();
}

function renderLedger(){
  let html="", balance=0, totalDebit=0, totalCredit=0;
  filteredLedger.forEach(t=>{
    let debit=(t.type==="Expense"||t.type==="Given")?t.amount:0;
    let credit=(t.type==="Income"||t.type==="Received")?t.amount:0;
    totalDebit+=debit; totalCredit+=credit;
    balance+=credit-debit;
    html+=`<tr>
      <td>${t.dateAD}</td>
      <td>${t.dateBS}</td>
      <td>${t.name}</td>
      <td>${debit}</td>
      <td>${credit}</td>
      <td>${t.payment}</td>
      <td class="${t.status==='Pending'?'status-pending':'status-done'}">${t.status}</td>
      <td>${balance}</td>
    </tr>`;
  });
  document.getElementById("ledgerTable").innerHTML=html;
  document.getElementById("ledgerTotalDebit").innerText=totalDebit;
  document.getElementById("ledgerTotalCredit").innerText=totalCredit;
  document.getElementById("ledgerTotalBalance").innerText=balance;
}

// Search Person
function searchPerson(){
  let name=document.getElementById("searchName").value.toLowerCase();
  searchResults=transactions.filter(t=>t.name.toLowerCase().includes(name));
  let html="", balance=0;
  searchResults.forEach(t=>{
    let debit=(t.type==="Expense"||t.type==="Given")?t.amount:0;
    let credit=(t.type==="Income"||t.type==="Received")?t.amount:0;
    balance+=credit-debit;
    html+=`<tr>
      <td>${t.dateAD}</td>
      <td>${t.dateBS}</td>
      <td>${t.name}</td>
      <td>${debit}</td>
      <td>${credit}</td>
      <td>${t.payment}</td>
      <td class="${t.status==='Pending'?'status-pending':'status-done'}">${t.status}</td>
      <td>${balance}</td>
    </tr>`;
  });
  document.getElementById("searchTable").innerHTML=html;
}

// Download PDF
function downloadPDF(data){
  if(!data || data.length===0){ alert("No data!"); return; }
  const { jsPDF }=window.jspdf;
  const doc=new jsPDF();
  doc.setFontSize(14);
  doc.text("Transactions Report",20,20);
  let y=30;
  data.forEach(t=>{
    doc.text(`${t.dateAD} | ${t.dateBS} | ${t.name} | ${t.type} | ${t.amount} | ${t.payment} | ${t.status}`,10,y);
    y+=8; if(y>270){ doc.addPage(); y=20; }
  });
  doc.save("transactions.pdf");
}

// Clear All Data
function clearAll(){
  if(confirm("Are you sure you want to clear all data?")){ 
    localStorage.removeItem("transactions"); transactions=[]; renderTransactions();
    alert("All data cleared.");
  }
}

// Initial render
renderTransactions();
</script>
</body>
</html>

On Sat, 23 Aug, 2025, 12:19 am Saroj KC, <mail@sarojkc2007.com.np> wrote:
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Personal Accounting Web App</title>
<style>
body { font-family: Arial, sans-serif; background: #f4f6f9; margin:0; }
header { background: #2c3e50; color:white; text-align:center; padding:15px 0; }
nav { display:flex; justify-content:center; background: #34495e; padding:10px; flex-wrap: wrap; }
nav button { background:#1abc9c; color:white; border:none; margin:5px; padding:10px 20px; border-radius:6px; cursor:pointer; font-weight:bold; }
nav button:hover { background:#16a085; }
.container { max-width:1000px; margin:20px auto; background:white; padding:20px; border-radius:8px; display:none; }
h2 { margin-top:0; }
input, select { padding:8px; margin:5px 0; width:100%; }
button.action { background:#3498db; color:white; border:none; padding:6px 12px; border-radius:4px; cursor:pointer; margin:2px; }
button.action:hover { background:#2980b9; }
table { width:100%; border-collapse:collapse; margin-top:20px; }
table, th, td { border:1px solid #ccc; }
th, td { padding:8px; text-align:left; }
.pending { color:orange; font-weight:bold; }
.done { color:green; font-weight:bold; }
.summary { display:flex; justify-content:space-around; background:#ecf0f1; padding:10px; border-radius:6px; margin-bottom:10px; }
.summary div { font-weight:bold; font-size:14px; }
</style>
</head>
<body>
<header>
    <h1>Personal Accounting Web App</h1>
</header>
<nav>
    <button onclick="showPage('menuPage')">🏠 Menu</button>
    <button onclick="showPage('newPage')">➕ New Transaction</button>
    <button onclick="showPage('ledgerPage')">📑 Ledger</button>
    <button onclick="showPage('searchPage')">🔍 Search</button>
</nav>

<!-- MENU -->
<div class="container" id="menuPage" style="display:block;">
    <h2>Welcome 👋</h2>
    <p>Select an option above to get started.</p>
</div>

<!-- NEW TRANSACTION -->
<div class="container" id="newPage">
    <h2>New Transaction</h2>
    <form id="transactionForm">
        <label>Name/Organization:</label>
        <input type="text" id="name" required>
        <label>Amount (Rs):</label>
        <input type="number" id="amount" required>
        <label>Type:</label>
        <select id="type" required>
            <option value="income">Income</option>
            <option value="expense">Expense</option>
            <option value="received">Money Received</option>
            <option value="given">Money Given</option>
        </select>
        <label>Payment Method:</label>
        <select id="payment">
            <option value="cash">Cash</option>
            <option value="bank">Bank</option>
            <option value="esewa">eSewa</option>
        </select>
        <label>Date (AD auto):</label>
        <input type="text" id="adDate" readonly>
        <label>Date (BS auto):</label>
        <input type="text" id="bsDate" readonly>
        <button type="submit" class="action">Add Transaction</button>
    </form>
</div>

<!-- LEDGER -->
<div class="container" id="ledgerPage">
    <h2>Ledger / All Transactions</h2>
    <div class="summary">
        <div>Total Income: Rs <span id="totalIncome">0</span></div>
        <div>Total Expenses: Rs <span id="totalExpense">0</span></div>
        <div>Pending Given: Rs <span id="pendingGiven">0</span></div>
        <div>Pending Received: Rs <span id="pendingReceived">0</span></div>
    </div>
    <button class="action" onclick="downloadPDF()">⬇ Download PDF</button>
    <table id="ledgerTable">
        <thead>
            <tr>
                <th>#</th>
                <th>Name/Organization</th>
                <th>Amount</th>
                <th>Type</th>
                <th>Payment</th>
                <th>Date(AD)</th>
                <th>Date(BS)</th>
                <th>Status</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
</div>

<!-- SEARCH -->
<div class="container" id="searchPage">
    <h2>Search Transaction</h2>
    <input type="text" id="searchInput" placeholder="Enter name/organization">
    <button class="action" onclick="doSearch()">Search</button>
    <table id="searchTable">
        <thead>
            <tr>
                <th>#</th>
                <th>Name/Organization</th>
                <th>Amount</th>
                <th>Type</th>
                <th>Payment</th>
                <th>Date(AD)</th>
                <th>Date(BS)</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
// LocalStorage
let transactions = JSON.parse(localStorage.getItem('transactions') || '[]');

// Set AD and BS Date
function getADDate(){
    let today=new Date();
    return today.toLocaleDateString('en-GB');
}
function getBSDate(){
    // Simple conversion: AD+56 years + 8 months approx (for demo)
    let today=new Date();
    let bsYear=today.getFullYear()+56;
    let bsMonth=today.getMonth()+8;
    if(bsMonth>11){ bsMonth-=12; bsYear+=1; }
    let bsDay=today.getDate();
    return `${bsYear}-${bsMonth+1}-${bsDay}`;
}
document.getElementById('adDate').value = getADDate();
document.getElementById('bsDate').value = getBSDate();

// Page Switcher
function showPage(pageId){
    document.querySelectorAll('.container').forEach(div=>div.style.display='none');
    document.getElementById(pageId).style.display='block';
    if(pageId==='ledgerPage') renderTransactions();
}

// Save
function saveTransactions(){ localStorage.setItem('transactions', JSON.stringify(transactions)); }

// Render Ledger
function renderTransactions(){
    const tbody=document.querySelector('#ledgerTable tbody');
    tbody.innerHTML='';
    let income=0, expense=0, pendingG=0, pendingR=0;
    transactions.forEach((t,i)=>{
        const tr=document.createElement('tr');
        tr.innerHTML=`<td>${i+1}</td>
        <td>${t.name}</td>
        <td>${t.amount}</td>
        <td>${t.type}</td>
        <td>${t.payment}</td>
        <td>${t.adDate}</td>
        <td>${t.bsDate}</td>
        <td class="${t.status==='Pending'?'pending':'done'}">${t.status}</td>
        <td>${t.status==='Pending'?`<button class="action" onclick="markDone(${i})">Done</button>`:''}
            <button class="action" onclick="deleteTransaction(${i})">Delete</button></td>`;
        tbody.appendChild(tr);
        // totals
        if(t.type==='income') income+=t.amount;
        if(t.type==='expense') expense+=t.amount;
        if(t.type==='given' && t.status==='Pending') pendingG+=t.amount;
        if(t.type==='received' && t.status==='Pending') pendingR+=t.amount;
    });
    document.getElementById('totalIncome').innerText=income;
    document.getElementById('totalExpense').innerText=expense;
    document.getElementById('pendingGiven').innerText=pendingG;
    document.getElementById('pendingReceived').innerText=pendingR;
}

// Add Transaction
document.getElementById('transactionForm').addEventListener('submit', function(e){
    e.preventDefault();
    const name=document.getElementById('name').value;
    const amount=parseFloat(document.getElementById('amount').value);
    const type=document.getElementById('type').value;
    const payment=document.getElementById('payment').value;
    const adDate=document.getElementById('adDate').value;
    const bsDate=document.getElementById('bsDate').value;
    const status=(type==='given'||type==='received')?'Pending':'Done';
    transactions.push({name,amount,type,payment,adDate,bsDate,status});
    saveTransactions();
    this.reset();
    document.getElementById('adDate').value=getADDate();
    document.getElementById('bsDate').value=getBSDate();
    alert('Transaction Added!');
});

// Mark Done
function markDone(i){ transactions[i].status='Done'; saveTransactions(); renderTransactions(); }
// Delete
function deleteTransaction(i){ transactions.splice(i,1); saveTransactions(); renderTransactions(); }

// Search
function doSearch(){
    const filter=document.getElementById('searchInput').value.toLowerCase();
    const tbody=document.querySelector('#searchTable tbody');
    tbody.innerHTML='';
    transactions.forEach((t,i)=>{
        if(t.name.toLowerCase().includes(filter)){
            const tr=document.createElement('tr');
            tr.innerHTML=`<td>${i+1}</td><td>${t.name}</td><td>${t.amount}</td><td>${t.type}</td>
            <td>${t.payment}</td><td>${t.adDate}</td><td>${t.bsDate}</td>
            <td class="${t.status==='Pending'?'pending':'done'}">${t.status}</td>`;
            tbody.appendChild(tr);
        }
    });
}

// PDF Download
function downloadPDF(){
    const { jsPDF }=window.jspdf;
    const doc=new jsPDF();
    doc.setFontSize(14);
    doc.text("Personal Accounting Ledger",10,10);
    let y=20;
    transactions.forEach((t,i)=>{
        doc.setFontSize(11);
        doc.text(`${i+1}. ${t.name} | Rs ${t.amount} | ${t.type} | ${t.payment} | AD: ${t.adDate} | BS: ${t.bsDate} | ${t.status}`,10,y);
        y+=8;
        if(y>280){ doc.addPage(); y=10; }
    });
    doc.save("ledger.pdf");
}

// Initial Render
renderTransactions();
</script>
</body>
</html>

Saroj KC

